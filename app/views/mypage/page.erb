<!--------------- NAV -------------------------------------->
<%= render :partial => "/home/nav" %>
  
  
<!--------------- MYPAGE CONTENT --------------------------->

<!-- user link -->
<h2 class="user_link">
  <span id='button-copy' data-clipboard-text='rooftop.house/<%= params[:username] %>'>&nbsp;rooftop.house/<%= params[:username] %>&nbsp;</span>
</h2>
<h6 class="user_link">Click to Copy the Link</h6>



<% u = User.where(nickname: params[:username]).take %>
<% @posts.each do |p| %>
  <div class="cont_stage"> 
    <% if p.cover_image %>
      <img src="<%= p.cover_image %>" style="height:100%; margin-bottom: 20px;">
    <% else %>
      <img src="http://placehold.it/300x800" style="height:100%; margin-bottom: 20px;">
    <% end %>
    <% if !current_user.nil? and !u.nil? and current_user.id == u.id %>
      <form class="cont_box" action="/mypage/update" enctype="multipart/form-data" method="post" autocomplete="off">
        <input type="hidden" name="post_id" value="<%= p.id %>">
        <input class="cont_txt" rows="4" cols="50" name="post_content" value="<%= p.post_content %>">
        <!--사진 올리는 버튼-->
        <input type ="file" name="cover_image">
        <input type ="submit" value="올리기!">
      </form>
    <% else %>
      <div class="cont_txt"><%= p.post_content %></div>
    <% end %>
    </br>
    </br>
    <!--댓글출력-->
    <div class="cont__replies">
      <% p.replies.each do |r| %>
        <div class="cont__replies__item"><%=r.content %></div>
      <% end %>
        
      <!--댓글 입력하는 폼-->
      <form action="/mypage/write_reply?username=<%= p.post_username %>" method="post">
        <input type="hidden" name="my_post_my_id" value="<%= p.id %>">
        <input type="text" name="myreply"><br>
        <input type="submit" value="댓글!!">
      </form>
    </div>
  </div>
<% end %>



<!------ ZEROCLIPBOARD SCRIPT (LINK COPY) ---------------------------->
<script src='//code.jquery.com/jquery.min.js'></script>
<script src='//cdnjs.cloudflare.com/ajax/libs/zeroclipboard/2.2.0/ZeroClipboard.min.js'></script>
<script>
$(function() {
	ZeroClipboard.config({
		swfPath: '//cdnjs.cloudflare.com/ajax/libs/zeroclipboard/2.2.0/ZeroClipboard.swf',
		forceHandCursor: true
	});
	var clipboard = new ZeroClipboard($('#button-copy'));
	clipboard.on('aftercopy', function(event) {
	  alert('Copied : '+event.data['text/plain']);

	  
	});
});
</script>